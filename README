# Terraform Remote Backend with Azure Blob Storage

## ğŸ“Œ Project Overview

This project demonstrates **production-grade Terraform state management** using **Azure Blob Storage as a remote backend**. It covers:

* Remote backend configuration
* Importing existing Azure resources into Terraform state
* State locking
* Blob versioning & recovery
* RBAC-based secure access

This setup reflects **real-world enterprise Terraform practices**.

---

## ğŸ— Architecture

**Components used:**

* Terraform
* Azure Resource Group
* Azure Storage Account
* Azure Blob Container (tfstate)
* Azure RBAC (Data Plane)

```
Terraform CLI
   |
   |  terraform init / plan / apply
   v
Azure Blob Storage (Remote Backend)
   â”œâ”€â”€ terraform.tfstate (versioned)
   â”œâ”€â”€ State Locking
   â””â”€â”€ Soft Delete + Recovery
```

---

## ğŸ“‚ Project Structure

```
terraform-remote-backend-demo/
â”œâ”€â”€ main.tf
â”œâ”€â”€ backend.tf
â”œâ”€â”€ providers.tf
â”œâ”€â”€ variables.tf
â”œâ”€â”€ outputs.tf
â”œâ”€â”€ terraform.tfvars
â”œâ”€â”€ README.md
```

---

## ğŸ” Remote Backend Configuration

`backend.tf`

```hcl
terraform {
  backend "azurerm" {
    resource_group_name  = "rg-tf-backend"
    storage_account_name = "tfstatekhush2026"
    container_name       = "tfstate"
    key                  = "terraform.tfstate"
  }
}
```

---

## âš™ Provider Configuration

`providers.tf`

```hcl
provider "azurerm" {
  features {}
}
```

---

## ğŸ“¥ Import Existing Azure Resource

Import an already created Resource Group into Terraform state:

```powershell
terraform import azurerm_resource_group.imported \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/rg-import-demo
```

Terraform now manages the resource **without recreating it**.

---

## ğŸ”’ State Versioning & Safety

### Enable Blob Versioning

```powershell
az storage account blob-service-properties update \
  --account-name tfstatekhush2026 \
  --enable-versioning true
```

### Verify State Versions

```powershell
az storage blob list \
  --container-name tfstate \
  --account-name tfstatekhush2026 \
  --include v \
  --auth-mode login \
  --output table
```

Each `terraform apply` creates a **new version** of `terraform.tfstate`.

---

## ğŸ”‘ RBAC (Data Plane Access)

Assign Blob Data permissions to the signed-in user:

```powershell
az role assignment create \
  --assignee <USER_OBJECT_ID> \
  --role "Storage Blob Data Contributor" \
  --scope /subscriptions/<SUB_ID>/resourceGroups/rg-tf-backend/providers/Microsoft.Storage/storageAccounts/tfstatekhush2026
```

This avoids using storage account keys and follows **least-privilege access**.

---

## ğŸ§  Key Learnings

* Terraform state is the **single source of truth**
* Remote backend prevents state loss and supports team collaboration
* Blob versioning allows **state rollback & disaster recovery**
* Import avoids risky resource recreation
* RBAC > Access Keys for enterprise security

---

## ğŸš€ Use Cases

* Enterprise Terraform deployments
* Multi-user Terraform collaboration
* Secure Infrastructure as Code
* Interview-ready Terraform project

---

## ğŸ“Œ Author

**Khushboo Sharma**
Cloud | Terraform | Azure | Infra Automation

---

â­ If you found this useful, consider starring the repo and sharing your learnings!

